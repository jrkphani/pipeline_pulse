{
  "summary": {
    "total_tests": 24,
    "passed_tests": 11,
    "failed_tests": 13,
    "pass_rate": 45.83333333333333,
    "total_duration": 11.497542381286621,
    "categories": {
      "authentication": {
        "total": 5,
        "passed": 5
      },
      "connectivity": {
        "total": 4,
        "passed": 2
      },
      "data_retrieval": {
        "total": 4,
        "passed": 1
      },
      "crud_operations": {
        "total": 2,
        "passed": 0
      },
      "performance": {
        "total": 2,
        "passed": 0
      },
      "error_handling": {
        "total": 2,
        "passed": 2
      },
      "integration": {
        "total": 2,
        "passed": 0
      },
      "production_readiness": {
        "total": 3,
        "passed": 1
      }
    },
    "start_time": "2025-06-05T07:53:53.399929",
    "end_time": "2025-06-05T07:54:05.016568"
  },
  "results": [
    {
      "name": "Environment Configuration",
      "category": "authentication",
      "passed": true,
      "duration": 7.867813110351562e-06,
      "details": {
        "environment_variables": {
          "ZOHO_CLIENT_ID": {
            "configured": true,
            "length": 35
          },
          "ZOHO_CLIENT_SECRET": {
            "configured": true,
            "length": "hidden"
          },
          "ZOHO_REFRESH_TOKEN": {
            "configured": true,
            "length": "hidden"
          },
          "ZOHO_BASE_URL": {
            "configured": true,
            "length": 30
          },
          "ZOHO_ACCOUNTS_URL": {
            "configured": true,
            "length": 24
          }
        },
        "url_checks": {
          "base_url_format": true,
          "accounts_url_format": true,
          "india_data_center": true,
          "api_version_v8": false
        },
        "environment": "development"
      },
      "error": null,
      "warnings": [
        "Not using API v8 - may cause compatibility issues"
      ]
    },
    {
      "name": "Token Refresh",
      "category": "authentication",
      "passed": true,
      "duration": 0.3326590061187744,
      "details": {
        "token_received": true,
        "token_length": 70,
        "refresh_duration_ms": 226.53,
        "expires_at": "2025-06-05T08:52:13.850229",
        "token_type": "Bearer"
      },
      "error": null,
      "warnings": []
    },
    {
      "name": "Connection Validation",
      "category": "authentication",
      "passed": true,
      "duration": 0.4175841808319092,
      "details": {
        "authenticated": true,
        "organization": {
          "company_name": "OCH Digitech Private Limited",
          "country": null,
          "time_zone": "Asia/Kolkata",
          "currency": "Singapore Dollar"
        },
        "data_center": "India (.in domain)",
        "api_version": "Other"
      },
      "error": null,
      "warnings": []
    },
    {
      "name": "Permission Scopes",
      "category": "authentication",
      "passed": true,
      "duration": 1.3445241451263428,
      "details": {
        "scopes": {
          "ZohoCRM.modules.ALL": {
            "accessible": true,
            "endpoint": "Deals",
            "response_keys": [
              "data",
              "info"
            ]
          },
          "ZohoCRM.settings.ALL": {
            "accessible": true,
            "endpoint": "settings/modules",
            "response_keys": [
              "modules"
            ]
          },
          "ZohoCRM.users.ALL": {
            "accessible": true,
            "endpoint": "users?type=CurrentUser",
            "response_keys": [
              "users",
              "info"
            ]
          },
          "ZohoCRM.org.ALL": {
            "accessible": true,
            "endpoint": "org",
            "response_keys": [
              "org"
            ]
          },
          "ZohoCRM.bulk.ALL": {
            "accessible": true,
            "endpoint": "settings/modules",
            "note": "Bulk operations endpoint accessible"
          }
        },
        "critical_scopes_accessible": true
      },
      "error": null,
      "warnings": []
    },
    {
      "name": "Token Expiration Handling",
      "category": "authentication",
      "passed": true,
      "duration": 0.2970240116119385,
      "details": {
        "current_token_length": 70,
        "expires_at": "2025-06-05T08:52:15.741458",
        "time_until_expiry_seconds": 3499.999858,
        "time_until_expiry_hours": 0.9722221827777778,
        "refresh_successful": true,
        "new_expires_at": "2025-06-05T08:52:15.909412",
        "expiration_extended": true
      },
      "error": null,
      "warnings": [
        "Token expires in less than 1 hour"
      ]
    },
    {
      "name": "Endpoint Accessibility",
      "category": "connectivity",
      "passed": true,
      "duration": 1.4914271831512451,
      "details": {
        "endpoints": {
          "org": {
            "accessible": true,
            "description": "Organization Info",
            "response_time_ms": 346.25,
            "response_keys": [
              "org"
            ],
            "status": "success"
          },
          "users?type=CurrentUser": {
            "accessible": true,
            "description": "Current User",
            "response_time_ms": 222.35,
            "response_keys": [
              "users",
              "info"
            ],
            "status": "success"
          },
          "Deals": {
            "accessible": true,
            "description": "Deals Module",
            "response_time_ms": 348.79,
            "response_keys": [
              "data",
              "info"
            ],
            "status": "success"
          },
          "Accounts": {
            "accessible": true,
            "description": "Accounts Module",
            "response_time_ms": 229.11,
            "response_keys": [
              "data",
              "info"
            ],
            "status": "success"
          },
          "settings/modules": {
            "accessible": true,
            "description": "Module Settings",
            "response_time_ms": 218.92,
            "response_keys": [
              "modules"
            ],
            "status": "success"
          },
          "settings/fields?module=Deals": {
            "accessible": false,
            "description": "Deal Fields",
            "error": "One of the expected parameter is missing",
            "status": "failed"
          }
        },
        "successful_endpoints": 5,
        "total_endpoints": 6,
        "average_response_time_ms": 273.08,
        "success_rate": 83.33333333333334
      },
      "error": null,
      "warnings": [
        "Deal Fields failed: One of the expected parameter is missing"
      ]
    },
    {
      "name": "API Version Compatibility",
      "category": "connectivity",
      "passed": false,
      "duration": 0.9947609901428223,
      "details": {
        "compatibility_results": {
          "v8_endpoint_accessible": true,
          "fields_parameter_enforced": false,
          "fields_parameter_working": true,
          "sample_response_keys": [
            "data",
            "info"
          ],
          "response_format_v8": true,
          "error_messages_v8": false,
          "api_url_v8": false
        },
        "compatibility_score": 60.0,
        "passed_checks": 3,
        "total_checks": 5
      },
      "error": null,
      "warnings": [
        "Unexpected error without fields: One of the expected parameter is missing",
        "Unexpected error format: the module name given seems to be invalid",
        "API URL not configured for v8"
      ]
    },
    {
      "name": "Network Resilience",
      "category": "connectivity",
      "passed": false,
      "duration": 0.3212261199951172,
      "details": {
        "resilience_results": {
          "normal_request": {
            "successful": false,
            "response_time_ms": 123.11,
            "status_code": 401
          },
          "dns_resolution": {
            "base_domain_resolved": true,
            "accounts_domain_resolved": true,
            "base_domain": "www.zohoapis.in",
            "accounts_domain": "accounts.zoho.in"
          },
          "ssl_certificate": {
            "valid": true,
            "subject": {
              "commonName": "pagesense-proxy.in"
            },
            "issuer": {
              "countryName": "GB",
              "stateOrProvinceName": "Greater Manchester",
              "localityName": "Salford",
              "organizationName": "Sectigo Limited",
              "commonName": "Sectigo RSA Domain Validation Secure Server CA"
            },
            "not_after": "Jul 21 23:59:59 2025 GMT"
          },
          "timeout_handling": {
            "timeout_occurred": false,
            "response_time_ms": 108.67,
            "note": "Request completed within timeout"
          }
        },
        "resilience_score": 66.66666666666666,
        "passed_checks": 2,
        "total_checks": 3
      },
      "error": null,
      "warnings": []
    },
    {
      "name": "Rate Limit Headers",
      "category": "connectivity",
      "passed": true,
      "duration": 0.33338379859924316,
      "details": {
        "rate_limit_info": {
          "remaining": null,
          "reset_time": null,
          "limit": null
        },
        "response_received": true,
        "rate_limit_tracking": false
      },
      "error": null,
      "warnings": []
    },
    {
      "name": "Deal Data Retrieval",
      "category": "data_retrieval",
      "passed": true,
      "duration": 0.5663979053497314,
      "details": {
        "total_deals_retrieved": 50,
        "field_completeness": {
          "Deal_Name": {
            "populated": 50,
            "total": 50,
            "percentage": 100.0
          },
          "Amount": {
            "populated": 50,
            "total": 50,
            "percentage": 100.0
          },
          "Stage": {
            "populated": 50,
            "total": 50,
            "percentage": 100.0
          },
          "Closing_Date": {
            "populated": 50,
            "total": 50,
            "percentage": 100.0
          },
          "Account_Name": {
            "populated": 50,
            "total": 50,
            "percentage": 100.0
          },
          "Owner": {
            "populated": 50,
            "total": 50,
            "percentage": 100.0
          }
        },
        "average_completeness": 100.0,
        "sample_deal_validation": {
          "has_deal_name": true,
          "has_amount": true,
          "has_stage": true,
          "has_id": true,
          "amount_is_numeric": true
        },
        "pagination_info": {
          "page": 1,
          "per_page": 50,
          "count": 50,
          "more_records": true
        },
        "sample_deal": {
          "Deal_Name": "Gen AI - Image/Video generation",
          "Amount": 1000,
          "Stage": "SFDC Opportunity ID (30)"
        }
      },
      "error": null,
      "warnings": []
    },
    {
      "name": "Field Validation",
      "category": "data_retrieval",
      "passed": false,
      "duration": 1.5585949420928955,
      "details": {
        "validation_results": {
          "request_without_fields": {
            "failed_as_expected": false,
            "unexpected_error": "One of the expected parameter is missing"
          },
          "request_with_valid_fields": {
            "successful": true,
            "deals_returned": 3,
            "fields_in_response": [
              "Deal_Name",
              "Amount",
              "Stage",
              "id"
            ]
          },
          "request_with_invalid_fields": {
            "failed_as_expected": false,
            "note": "Request with invalid fields should have failed"
          },
          "field_type_validation": {
            "successful": true,
            "field_types": {
              "Deal_Name": "str",
              "Created_Time": "str",
              "Amount": "int",
              "Stage": "str",
              "id": "str",
              "Closing_Date": "str"
            },
            "amount_is_numeric": true,
            "deal_name_is_string": true
          },
          "default_field_set": {
            "successful": true,
            "requested_fields": 9,
            "returned_fields": 10,
            "all_requested_returned": true
          }
        },
        "validation_score": 60.0,
        "passed_checks": 3,
        "total_checks": 5
      },
      "error": null,
      "warnings": [
        "Unexpected error without fields: One of the expected parameter is missing",
        "Request with invalid fields should have failed"
      ]
    },
    {
      "name": "Data Consistency",
      "category": "data_retrieval",
      "passed": false,
      "duration": 1.67264986038208,
      "details": {
        "consistency_results": {
          "same_deal_multiple_requests": {
            "error": "Failed to get access token: Failed to refresh access token: {\"error_description\":\"You have made too many requests continuously. Please try again after some time.\",\"error\":\"Access Denied\",\"status\":\"failure\"}"
          },
          "id_format_consistency": {
            "error": "Failed to get access token: Failed to refresh access token: {\"error_description\":\"You have made too many requests continuously. Please try again after some time.\",\"error\":\"Access Denied\",\"status\":\"failure\"}"
          },
          "number_formatting": {
            "error": "Failed to get access token: Failed to refresh access token: {\"error_description\":\"You have made too many requests continuously. Please try again after some time.\",\"error\":\"Access Denied\",\"status\":\"failure\"}"
          }
        },
        "consistency_score": 0,
        "passed_checks": 0,
        "total_checks": 0
      },
      "error": null,
      "warnings": [
        "Same deal consistency test failed: Failed to get access token: Failed to refresh access token: {\"error_description\":\"You have made too many requests continuously. Please try again after some time.\",\"error\":\"Access Denied\",\"status\":\"failure\"}",
        "ID format consistency test failed: Failed to get access token: Failed to refresh access token: {\"error_description\":\"You have made too many requests continuously. Please try again after some time.\",\"error\":\"Access Denied\",\"status\":\"failure\"}",
        "Number formatting test failed: Failed to get access token: Failed to refresh access token: {\"error_description\":\"You have made too many requests continuously. Please try again after some time.\",\"error\":\"Access Denied\",\"status\":\"failure\"}"
      ]
    },
    {
      "name": "Pagination Functionality",
      "category": "data_retrieval",
      "passed": false,
      "duration": 0.11123204231262207,
      "details": {
        "error": "Failed to get access token: Failed to refresh access token: {\"error_description\":\"You have made too many requests continuously. Please try again after some time.\",\"error\":\"Access Denied\",\"status\":\"failure\"}"
      },
      "error": null,
      "warnings": []
    },
    {
      "name": "Read Operations",
      "category": "crud_operations",
      "passed": false,
      "duration": 0.10963892936706543,
      "details": {
        "error": "Failed to get access token: Failed to refresh access token: {\"error_description\":\"You have made too many requests continuously. Please try again after some time.\",\"error\":\"Access Denied\",\"status\":\"failure\"}"
      },
      "error": null,
      "warnings": []
    },
    {
      "name": "Metadata Operations",
      "category": "crud_operations",
      "passed": false,
      "duration": 0.12121319770812988,
      "details": {
        "error": "Failed to get access token: Failed to refresh access token: {\"error_description\":\"You have made too many requests continuously. Please try again after some time.\",\"error\":\"Access Denied\",\"status\":\"failure\"}"
      },
      "error": null,
      "warnings": []
    },
    {
      "name": "Response Times",
      "category": "performance",
      "passed": false,
      "duration": 0.10458707809448242,
      "details": {
        "error": "Failed to get access token: Failed to refresh access token: {\"error_description\":\"You have made too many requests continuously. Please try again after some time.\",\"error\":\"Access Denied\",\"status\":\"failure\"}"
      },
      "error": null,
      "warnings": []
    },
    {
      "name": "Rate Limiting",
      "category": "performance",
      "passed": false,
      "duration": 0.9418818950653076,
      "details": {
        "successful_requests": 0,
        "total_attempts": 5,
        "average_response_time_ms": 0,
        "rate_limit_encountered": true
      },
      "error": null,
      "warnings": [
        "Rate limiting detected"
      ]
    },
    {
      "name": "Invalid Endpoints",
      "category": "error_handling",
      "passed": true,
      "duration": 0.10514712333679199,
      "details": {
        "error_properly_handled": true,
        "error_type": "OTHER",
        "error_message": "Failed to get access token: Failed to refresh access token: {\"error_description\":\"You have made too many requests continuously. Please try again after some time.\",\"error\":\"Access Denied\",\"status\":\"failure\"}"
      },
      "error": null,
      "warnings": [
        "Unexpected error format: Failed to get access token: Failed to refresh access token: {\"error_description\":\"You have made too many requests continuously. Please try again after some time.\",\"error\":\"Access Denied\",\"status\":\"failure\"}"
      ]
    },
    {
      "name": "Malformed Requests",
      "category": "error_handling",
      "passed": true,
      "duration": 0.10284876823425293,
      "details": {
        "error_properly_handled": true,
        "error_type": "OTHER",
        "error_message": "Failed to get access token: Failed to refresh access token: {\"error_description\":\"You have made too many requests continuously. Please try again after some time.\",\"error\":\"Access Denied\",\"status\":\"failure\"}"
      },
      "error": null,
      "warnings": [
        "Unexpected error format: Failed to get access token: Failed to refresh access token: {\"error_description\":\"You have made too many requests continuously. Please try again after some time.\",\"error\":\"Access Denied\",\"status\":\"failure\"}"
      ]
    },
    {
      "name": "Unified CRM Service",
      "category": "integration",
      "passed": false,
      "duration": 0.2743511199951172,
      "details": {
        "error": "Failed to fetch deals: Failed to get access token: Failed to refresh access token: {\"error_description\":\"You have made too many requests continuously. Please try again after some time.\",\"error\":\"Access Denied\",\"status\":\"failure\"}"
      },
      "error": null,
      "warnings": []
    },
    {
      "name": "API Endpoints",
      "category": "integration",
      "passed": false,
      "duration": 0.10277605056762695,
      "details": {
        "error": "No module named 'psycopg2'"
      },
      "error": null,
      "warnings": []
    },
    {
      "name": "Environment Configuration",
      "category": "production_readiness",
      "passed": false,
      "duration": 1.2159347534179688e-05,
      "details": {
        "required_vars_configured": 5,
        "total_required_vars": 5,
        "missing_vars": [],
        "url_checks": {
          "base_url_https": true,
          "accounts_url_https": true,
          "api_version_v8": false,
          "india_data_center": true
        },
        "environment": "development"
      },
      "error": null,
      "warnings": [
        "Not using API v8"
      ]
    },
    {
      "name": "Security Configuration",
      "category": "production_readiness",
      "passed": true,
      "duration": 4.0531158447265625e-06,
      "details": {
        "https_check": {
          "base_url_secure": true,
          "accounts_url_secure": true
        },
        "token_security": {
          "refresh_token_length": 70,
          "client_secret_length": 42,
          "tokens_not_empty": true
        }
      },
      "error": null,
      "warnings": []
    },
    {
      "name": "API Health",
      "category": "production_readiness",
      "passed": false,
      "duration": 0.19360995292663574,
      "details": {
        "error": "Failed to get access token: Failed to refresh access token: {\"error_description\":\"You have made too many requests continuously. Please try again after some time.\",\"error\":\"Access Denied\",\"status\":\"failure\"}"
      },
      "error": null,
      "warnings": []
    }
  ],
  "environment": {
    "branch": "local-testing",
    "python_version": "3.13.3 (main, Apr  8 2025, 13:54:08) [Clang 16.0.0 (clang-1600.0.26.6)]",
    "test_timestamp": "2025-06-05T07:54:05.049972"
  }
}